<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="styles.css">
    <title>Vue Calc</title>
  </head>
  <body>
    <div class="main-container grey-border" id="app">
      <div class="name">VueCalc</div>
      <div class="result"><input type="text" v-model="result" class="grey-border" readonly="true" /></div>
      <div class="content grey-border">
        <div class="digits">
          <button v-for="number in numbers" v-on:click="updateResult(number.toString(), false)">
            {{ number.toString() }}
          </button>
          <button v-for="xter in specialXters" v-on:click="updateResult(number)">
            {{ xter }}
          </button>
        </div>
        <div class="operands">
          <button v-for="edit in edits" v-on:click="operationMatcher()[edit.text]()">
            {{ edit.text }}
          </button>
          <button v-for="operator in operators" v-on:click="updateResult(operator.text, false)">
            {{ operator.text }}
          </button>
        </div>
      </div>
    </div>
  </body>
  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
  <script>
    var app = new Vue({
      el: '#app',
      data: {
        numbers: [1, 2, 3, 4, 5, 6, 7, 8, 9, 0],
        specialXters: [".", "+/-"],
        edits: [
          { text: "c" },
          { text: "del" }
        ],
        operators: [
          { text: " + " },
          { text: " - " },
          { text: " * " },
          { text: " / " },
          { text: "=" }
        ],
        result: ''
      },
      methods: {
        updateResult: function(val, reset) {
          if (reset || this.result === '0') {
            this.result = val;
          } else {
            this.result += val;
            this.result = this.result.slice(0, 15);
          }
        },

        backspace: function() {
          if (this.result) {
            result = this.result.slice(0,-1);
          } else {
            result = '';
          }

          if (result.length < 1) result = '0';
          this.updateResult(result, true);
        },

        cancel: function() {
          this.updateResult('0', true);
        },

        getResult: function() {
          // WIP
          operators = ["/", "*", "+", "-" ];
          operators.forEach(function() {
            (this.result)
          });
        },


        operationMatcher: function() {
          return {
            "c": this.cancel,
            "del": this.backspace,
            "=": this.getResult
          };
        }
      }
    });
  </script>
</html>
